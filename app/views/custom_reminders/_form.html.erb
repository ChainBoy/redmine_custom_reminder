<div class="splitcontent">
  <div class="splitcontentleft">
    <div class="box tabular">
      <p><%= f.text_field :name, required: true, :size => 50 %></p>
      <p><%= f.text_area :description, :cols => 40, :rows => 5 %></p>
      <p><%= f.text_field :interval, required: true %></p>
      <p><%= f.select :condition_type, options_for_select(CustomReminder::CONDITION_TYPE, @reminder.condition_type) %></p>
      <p><%= f.select :remind_type, options_for_select(CustomReminder::REMIND_TYPE, @reminder.remind_type) %></p>
      <p><%= f.check_box :active %></p>
    </div>
  </div>

  <div class="splitcontentright">
    <fieldset class="box" id="custom_reminder_enabled_projects">
      <legend><%= l(:label_reminder_enabled_projects) %></legend>
      <%= custom_reminder_render_nested_projects(Project.visible.active) do |p|
        content_tag('label', check_box_tag('custom_reminder[project_ids][]', p.id, @reminder.project_ids.include?(p.id),
                                           :id => nil) + ' ' + h(p), :class => 'block')
      end %>
      <%= hidden_field_tag('custom_reminder[project_ids][]', '', :id => nil) %>
      <p><%= check_all_links 'custom_reminder_enabled_projects' %></p>
    </fieldset>
  </div>
</div>

<div style="clear: left;"></div>

<fieldset class="box">
  <div class="splitcontent">
    <%= render :layout => 'layouts/collapsible',
               :locals => {
                   :collapsed => (not (@reminder.user_list_script.present? || @reminder.condition_script.present?)),
                   :label => l(:label_custom_reminder_trigger_definition)} do %>
      <div class="splitcontentleft">
        <%= f.text_area :user_list_script, :cols => 40, :rows => 20, :wrap => 'off', :class => 'custom_reminder_script' %>
      </div>
      <div class="splitcontentright">
        <%= f.text_area :condition_script, :cols => 40, :rows => 20, :wrap => 'off', :class => 'custom_reminder_script' %>
      </div>
    <% end %>
  </div>
</fieldset>